/**
 * Created by mcake on 2016/4/14.
 */
window.onload=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;Resource.baseUrl="/shop/theme/xth1/images/activity/2016/mothersDay/",a=new Resource.JSONloader("default.res.json"),f=!1,g=!1,h=function(){var a=/MSIE (\d+\.\d+)/.exec(navigator.userAgent);return!a||a[1]>9?!0:!1}(),i=function(){var a=$("#m_audio");return a.jPlayer({ready:function(){$(this).jPlayer("setMedia",{title:"",mp3:"http://edm.mcake.com/shuxy/2016/motherDay/images/audio.mp3"})},ended:function(){d.stop(),f=!1},swfPath:"http://edm.mcake.com/shuxy/2016/motherDay/js/jplayer",supplied:"mp3",wmode:"window",useStateClassSkin:!0,autoBlur:!1,smoothPlayBar:!0,keyEnabled:!0,remainingDuration:!0,toggleDuration:!0}),{play:function(){a.jPlayer("play")},pause:function(){a.jPlayer("pause")}}},j=function(){var c,a=document.getElementById("m_title");b=new MovieClip(Resource.getRes("t[1-2]_png"),Resource.getRes("title_json"),"mc_title",a),b.setFrame(0),c=function(){b.gotoAndPlay(1,-1)},h&&(a.addEventListener("webkitAnimationEnd",c),a.addEventListener("animationend",c))},k={"slide-down-l":function(a,c,d){var e=$(a);e.css({opacity:0,marginLeft:.3*-a.offsetWidth,marginTop:.8*-a.offsetHeight}),setTimeout(function(){e.animate({opacity:1,marginLeft:0,marginTop:0},1e3,function(){b.gotoAndPlay(1,-1),d&&d()})},c)},"slide-down-l2":function(a,b,d){var e=$(a);e.css({opacity:0,marginLeft:.4*-a.offsetWidth,marginTop:.4*-a.offsetHeight}),setTimeout(function(){e.animate({opacity:1,marginLeft:0,marginTop:0},1e3,function(){c.gotoAndPlay(1,-1),d&&d()})},b)},"slide-down-r":function(a,b,c){var d=$(a);d.css({opacity:0,marginRight:.15*-a.offsetWidth,marginTop:.8*-a.offsetHeight}),setTimeout(function(){d.animate({opacity:1,marginRight:0,marginTop:0},1e3,c)},b)},"slide-down-r2":function(a,b,c){var d=$(a);d.css({opacity:0,marginRight:.15*-a.offsetWidth,marginTop:.8*-a.offsetHeight}),setTimeout(function(){d.animate({opacity:1,marginRight:0,marginTop:0},1e3,c)},b)},"slide-up-l":function(a,b,c){var d=$(a);d.css({opacity:0,marginLeft:.5*-a.offsetWidth,marginTop:.5*a.offsetHeight}),setTimeout(function(){d.animate({opacity:1,marginLeft:0,marginTop:0},1e3,c)},b)},"slide-up-r":function(a,b,c){var d=$(a);d.css({opacity:0,marginRight:.5*-a.offsetWidth,marginTop:.5*a.offsetHeight}),setTimeout(function(){d.animate({opacity:1,marginRight:0,marginTop:0},1e3,c)},b)},"rotate-r":function(a,b,c){var d=$(a);d.css({opacity:0,marginRight:.5*-a.offsetWidth,marginTop:.5*a.offsetHeight}),setTimeout(function(){d.animate({opacity:1,marginRight:0,marginTop:0},1e3,c)},b)},"fade-down":function(a,b,c){var d=$(a);d.css({opacity:0,marginLeft:.02*-a.offsetWidth,marginTop:.1*-a.offsetHeight}),setTimeout(function(){d.animate({opacity:1,marginLeft:0,marginTop:0},1e3,c)},b)},"fade-in":function(a,b,c){var d=$(a);d.css({opacity:0}),setTimeout(function(){d.animate({opacity:1},800,c)},b)}},l=function(a){var c,b=a.getAttribute("data-anim");k[b]&&(c=1e3*Number(a.getAttribute("data-delay")||0),k[b].call(a,a,c))},m=function(a){function b(){var d,e,f,g,h,i,j,k,l,m,n,o,b=navigator.appVersion.split("MSIE"),c=parseFloat(b[1]);if(c>=5.5&&document.body.filters)for(d=0,e=a.getElementsByTagName("img"),f=0;f<e.length;f++)g=e[f],h=g.src.toUpperCase(),"PNG"!=h.substring(h.length-3,h.length)||g.getAttribute("usemap")||(d++,i=g.id||"ra_png_"+d.toString(),j=new Image,j.proData=i,j.onload=function(){$("#"+this.proData).css("width",this.width+"px").css("height",this.height+"px")},j.src=g.src,k="id='"+i+"' ",l=g.className?"class='"+g.className+"' ":"",m=g.title?"title='"+g.title+"' ":"title='"+g.alt+"' ",n="display:inline-block;"+g.style.cssText,"left"==g.align&&(n="float:left;"+n),"right"==g.align&&(n="float:right;"+n),g.parentElement.href&&(n="cursor:hand;"+n),o="<span "+k+l+m+' style="'+"width:"+g.width+"px; height:"+g.height+"px;"+n+";"+"filter:progid:DXImageTransform.Microsoft.AlphaImageLoader"+"(src='"+g.src+"', sizingMethod='scale');\"></span>",g.outerHTML=o,f-=1)}"undefined"==typeof window.addEventListener&&"undefined"==typeof document.getElementsByClassName&&window.attachEvent("onload",b)},n=function(a){var b=$(window),c=b.scrollTop(),d=$(a).find("[data-anim]"),e=[];d.each(function(){e.push({$elem:$(this),anim:this.getAttribute("data-anim"),scrollTop:$(this).offset().top,isAnimated:!1})}),b.on("scroll",function(){var a=b.scrollTop(),d=document.documentElement.clientHeight;$.each(e,function(b,e){e.isAnimated||a+d>e.scrollTop+c&&(h?e.$elem.addClass(e.anim):l(e.$elem[0]),e.isAnimated=!0)})}).trigger("scroll")},o=function(){var a,b;document.body.removeChild(Resource.el("#loading_wrap")),Resource.el("#mother_wrap").style.display="block",m(document.getElementById("mother_wrap")),e=i(),a=$("#m_letter"),b=a.parent(),c=new MovieClip(Resource.getRes("p[1-5]_png"),Resource.getRes("player_json"),"mc_play","player"),d=new MovieClip(Resource.getRes("r[1-2]_png"),Resource.getRes("recorder_json"),"mc_recorder","recorder"),j(),n("#mother_wrap"),h&&c.setFrame(0),b.on("webkitAnimationEnd animationend",function(){c.gotoAndPlay(1,-1)}),a.on("click",function(){g||(c.el.style.display="none",c.stop().clear(),d.el.style.display="block",d.gotoAndPlay(1,-1),g=!0),f?(e.pause(),d.stop(),this.title="点击播放录音"):(e.play(),d.play(),this.title="点击暂停录音"),f=!f})},a.addEvent("success",function(a){var b=new Resource.loadGroup("preload",a),c=Resource.el("#loading_indicator");b.addEvent("progress",function(a,b){c.innerHTML="loading: "+Math.floor(100*(a/b))+"%"}),b.addEvent("complete",o)})};