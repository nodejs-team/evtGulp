var requestAnimationFrame,cancelAnimationFrame,EC={version:"1.0.0"};!function(a){"use strict";var h,i,b=Array.prototype.slice,c=Object.prototype.toString,d=Object.prototype.hasOwnProperty,e=Array.prototype,f=Object.prototype,g=Function.prototype;Date.now||(Date.now=function(){return+new Date}),Object.create=function(){function a(){}return function(b){var c,e,f;if("object"!=typeof b)throw TypeError("Object prototype may only be an Object or null");if(a.prototype=b,c=new a,a.prototype=null,arguments.length>1){e=Object(arguments[1]);for(f in e)d.call(e,f)&&(c[f]=e[f])}return c}}(),g.bind||(g.bind=function(){var a=this,b=[].shift.call(arguments),c=[].slice.call(arguments);return function(){return a.apply(b,[].concat.call(c,[].slice.call(arguments)))}}),e.find||(e.find=function(a){for(var b=0,c=this.length;c>b;b++)if(a&&a(this[b],b,this)===!0)return this[b]}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===f.toString.call(a)}),e.contains=e.includes||function(a){return this.indexOf(a)>-1},h=a.extend=function(a){var d,e,f,c=b.call(arguments,1);for(f=0;f<c.length;f++)for(e in d=c[f])d.hasOwnProperty(e)&&(a[e]=d[e]);return a},a.provide=function(b){"object"==typeof b&&h(a,b)},a.provide({isDefined:function(a){return"undefined"!=typeof a},isNumber:function(a){return"number"==typeof a},isString:function(a){return"string"==typeof a},isFunction:function(a){return"function"==typeof a},isObject:function(a){return"object"==typeof a},isArray:Array.isArray||function(a){return"[object Array]"===c.call(a)},upperKey:function(a){return a.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()})},getStyle:function(b,c){return window.getComputedStyle(b,null)[a.upperKey(c)]}}),i=function(a,b){var e,c=this;return e=a&&d.call(a,"constructor")?a.constructor:function(){return c.apply(this,arguments)},h(e,c,b),e.prototype=Object.create(c.prototype,a),e.prototype.constructor=e,e.superclass=c.prototype,e},a.provide({classExtend:i})}(EC),function(a){"use strict";var d,b=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,c={};c.toHex=function(a){var c,d,e,f,g,h;if(/^(rgb|RGB)/.test(a)){for(c=a.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),d="#",e=0;e<c.length;e++)f=Number(c[e]).toString(16),"0"===f&&(f+=f),d+=f;return 7!==d.length&&(d=a),d}if(!b.test(a))return a;if(g=a.replace(/#/,"").split(""),6===g.length)return a;if(3===g.length){for(h="#",e=0;e<g.length;e+=1)h+=g[e]+g[e];return h}},c.toRgb=function(a,c){var e,f,g,h,d=a.toLowerCase();if(d&&b.test(d)){if(e="rgb",4===d.length){for(f="#",g=1;4>g;g+=1)f+=d.slice(g,g+1).concat(d.slice(g,g+1));d=f}for(h=[],g=1;7>g;g+=2)h.push(parseInt("0x"+d.slice(g,g+2)));return"number"==typeof c&&(h.push(c),e="rgba"),e+"("+h.join(",")+")"}return d},d=function(a,b){return a.x>b.x&&a.x<b.x+b.width&&a.y>b.y&&a.y<b.y+b.height?!0:!1},a.util=a.util||{},a.extend(a.util,{color:c,isPointInPath:d})}(window.EC),function(a){"use strict";var b=Array.prototype.slice,c=function(){this.initialize.apply(this,arguments)};a.extend(c.prototype,{initialize:function(){this._eventPool={},this._guid=0},on:function(a,b,c){var e,d=this;return a in this._eventPool||(this._eventPool[a]=[]),b._guid=this._guid++,e=function(){return b.apply(c||d,arguments)},e._guid=b._guid,this._eventPool[a].push(e),this},once:function(a,b,c){var d=function(){b.apply(c||this,arguments),this.off(a,d)};return this.on(a,d,this),this},off:function(a,b){var d,e;if(void 0===b)return delete this._eventPool[a],this;if(d=this._eventPool[a],!d)return this;for(e=0;e<d.length;e++)d[e]._guid===b._guid&&d.splice(e,1);return this},dispatch:function(a){var d,e,c=this._eventPool[a];if(!c)return this;for(d=b.call(arguments,1),e=0;e<c.length;e++)"function"==typeof c[e]&&c[e].apply(this,d);return this},dispatchAll:function(){var c,a=b.call(arguments);for(c in this._eventPool)a.unshift(c),this.dispatch.apply(this,a);return this},success:function(a){return this.on("success",a)},complete:function(a){return this.on("complete",a)},error:function(a){return this.on("error",a)},progress:function(a){return this.on("progress",a)},clear:function(){return this._eventPool={},this}}),c.extend=a.classExtend,a.provide({Event:c})}(window.EC),function(a){"use strict";var g,h,b=document,c=b.body,d=b.documentElement,e="ontouchstart"in document,f=window.navigator.msPointerEnabled;e=e||f,g=f?{START:"MSPointerDown",MOVE:"MSPointerMove",END:"MSPointerCancel"}:{START:e?"touchstart":"mousedown",MOVE:e?"touchmove":"mousemove",END:e?"touchend":"mouseup"},h=function(){this.enableStack=[],this._touchX=0,this._touchY=0,this._offsetX=0,this._offsetY=0,this._bound={},this._ratio=1},h.prototype={attach:function(a){this.stage=a,this.element=a.canvas,this._startTime=0,this._bindEvents()},_bindEvents:function(){this.element.addEventListener(g.START,this._onTouchStart.bind(this),!1),this.element.addEventListener(g.MOVE,this._onTouchMove.bind(this),!1),this.element.addEventListener(g.END,this._onTouchEnd.bind(this),!1)},_onTouchStart:function(b){b=e?b.targetTouches[0]:b,this._startTime=Date.now(),this._offsetX=window.pageXOffset||d.scrollLeft||c.scrollLeft||0,this._offsetY=window.pageYOffset||d.scrollTop||c.scrollTop||0,this._bound=this.element.getBoundingClientRect(),this._ratio=this.stage.width/parseFloat(a.getStyle(this.element,"width")),this._setTouchXY(b),this.enableStack=this._getTouchEnables(),this._triggerEvent("touchstart",b)},_onTouchMove:function(a){a=e?a.changedTouches[0]:a,this._setTouchXY(a),this._triggerEvent("touchmove",a)},_onTouchEnd:function(a){a=e?a.changedTouches[0]:a,this._setTouchXY(a),this._triggerEvent("touchend",a);var b=Date.now()-this._startTime;200>b&&this._triggerEvent("click",a),b>500&&this._triggerEvent("longtap",a)},_triggerEvent:function(b,c){var f,d=this,e=this.enableStack.find(function(b){return a.util.isPointInPath({x:d._touchX,y:d._touchY},b)});e&&(f={type:b,stageX:this._touchX,stageY:this._touchY,target:e},e.dispatch(b,a.extend(f,this._getOriginalEvent(c))))},_getTouchEnables:function(){function b(c){for(var d=c.getChilds(),e=d.length;e--;)d[e].touchEnabled&&a.push(d[e]),"Sprite"===d[e].$type&&b(d[e])}var a=[];return b(this.stage),a},_getOriginalEvent:function(a){var b={};return["pageX","pageY","clientX","clientY","screenX","screenY","radiusX","radiusY","rotationAngle"].forEach(function(c){b[c]=a[c]}),b},_setTouchXY:function(a){this._touchX=(a.pageX-this._bound.left-this._offsetX)*this._ratio,this._touchY=(a.pageY-this._bound.top-this._offsetY)*this._ratio}},a.provide({TouchEvent:h})}(window.EC),function(a){"use strict";var b=/^https?:\/\//,c={},d=function(c,d,e){var f=new Image;f.addEventListener("load",function g(){d&&d(f),this.removeEventListener("load",g,!1)},!1),f.addEventListener("error",function h(){e&&e(),console.error("fail load:"+c),this.removeEventListener("error",h,!1)},!1),c=b.test(c)?c:a.baseUrl+c,f.src=c},e=EC.Event.extend({initialize:function(a){var b=this;e.superclass.initialize.call(this),d(a,function(a){b.dispatch("success",a)},function(a){b.dispatch("error",a)})}}),f=function(a,b){d(a.url,function(d){c[a.name]={width:d.width,height:d.height,bitMapData:d},EC.extend(c[a.name],a),EC.isFunction(b)&&b(a)})},g=function(c,d,e){var f=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHttp")}catch(a){return null}}();if(f)return c=b.test(c)?c:a.baseUrl+c,f.open("GET",c,!0),f.onreadystatechange=function(){if(4==f.readyState)if(200==f.status)try{d&&d(JSON.parse(f.responseText))}catch(a){}else e&&e(f),console.error("fail load:"+c)},f.send(null),f},h=EC.Event.extend({initialize:function(a){var b=this;h.superclass.initialize.call(this),g(a,function(a){b.dispatch("success",a)},function(a){b.dispatch("error",a)})}}),i=function(a,b){"object"==typeof a&&("image"==a.type?f(a,function(){b&&b(a)}):"json"==a.type||"sheet"==a.type?g(a.url,function(d){var g,h,i,e=EC.extend({},a,{data:d});c[a.name]=e,"sheet"==a.type?(g=a.url.replace(/\.json$/,".png"),h=a.name.replace(/_json$/,"_png"),i=EC.extend({},a,{url:g,name:h,type:"image"}),f(i,function(){b&&b(e)})):b&&b(e)}):(c[a.name]=a,b&&b(a)))},j=function(){return c},k=function(a,b){var f,g,h,i,j,k,d=/\[(\d+\-\d+)\]/,e=d.exec(a);if(e){for(f=[],g=RegExp.$1.split("-"),h=a.replace(d,"").split("_"),i=Number(g[0]);i<Number(g[1])+1;i++)j=h[0]+i+"_"+h[1],f.push(c[j]);return f}return k=c[a],void 0===k?console.error(a+" does not exist!"):"json"==k.type||"sheet"==k.type?b?k.data.frames[b]:k.data:k},l=function(a,b){var c,e,f;if("string"!=typeof a)return a;if(!/^(#|\.)/.test(a))return null;if(c=a.charAt(0),b=b||document,"#"==c)return document.getElementById(a.substr(1,a.length));if(document.querySelectorAll)return b.querySelectorAll(a);try{return b.getElementsByClassName(a)}catch(d){return e=[],f=b.getElementsByTagName("*"),f.forEach(function(b){(" "+b.className+" ").indexOf(" "+a+" ")>-1&&e.push(b)}),e}},m=function(a,b){var d,c=b.groups.find(function(b){return b.name==a});return void 0===c?console.error('group "'+a+'" dose not exsit!'):d=c.keys.split(",").map(function(a){return a.trim()})},n=function(a,b){var c=[];return a.forEach(function(a){b.indexOf(a.name)>-1&&c.push(a)}),c},o=EC.Event.extend({initialize:function(a,b){var d,e,f,g,c=m(a,b);void 0!==c&&(d=n(b.resources,c),e=this,f=0,g=d.length,o.superclass.initialize.call(this),d.forEach(function(a){i(a,function(){e.dispatch("progress",++f,g,a),f>g-1&&e.dispatch("complete")})}))}});EC.extend(a,{loadImage:function(a){return new e(a)},loadJson:function(a){return new h(a)},loadGroup:function(a,b){return new o(a,b)},getAsset:j,getRes:k,el:l,baseUrl:"images/"})}(window.RES||(window.RES={})),requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){return setTimeout(a,1e3/60)},cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(a){return clearTimeout(a)},function(a){"use strict";var b=a.Event.extend({initialize:function(){b.superclass.initialize.call(this),this.ticker=null},start:function(){var a=this;return+function b(){a.ticker=requestAnimationFrame(b),a.dispatch("ticker")}(),this},stop:function(){return this.ticker&&(cancelAnimationFrame(this.ticker),delete this.ticker),this}});a.provide({Ticker:b})}(window.EC),function(a){"use strict";var b=a.Event.extend({initialize:function(c,d){b.superclass.initialize.call(this),this._currentCount=0,this._lastTime=0,this._repeatCount=d,this._waitTime=0,this._ticker=new a.Ticker,this.delay=c,this._initEvents()},start:function(){return this._lastTime=Date.now(),this._ticker.start(),this},stop:function(){if(this._ticker)if(this._ticker.stop(),this._waitTime>0){var a=this;setTimeout(function(){a.dispatch("complete"),a.reset()},this._waitTime)}else this.dispatch("complete"),this.reset();return this},wait:function(a){return this._waitTime=a,this},pause:function(a){if(this._ticker&&(this._ticker.stop(),this.dispatch("pause")),"number"==typeof a&&a>0){var b=this;setTimeout(function(){b._ticker.start()},a)}return this},setRepeatCount:function(a){return this._repeatCount=a,this},_timerHandle:function(){var a=Date.now();if(a-this._lastTime>=this.delay){if(this._repeatCount&&++this._currentCount==this._repeatCount)return this.stop(),void 0;this._lastTime=a,this.dispatch("timer",a)}},_initEvents:function(){this._ticker.on("ticker",this._timerHandle,this)},reset:function(){return this._currentCount=0,this._ticker=null,this}});a.provide({Timer:b})}(window.EC),function(a){"use strict";var b=Math.pow,c=Math.PI,d=1.70158,e={linear:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return(a*=2)<1?.5*a*a:.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return(a*=2)<1?.5*a*a*a*a:.5*(2-(a-=2)*a*a*a)},easeOutQuart:function(a){return-(b(a-1,4)-1)},easeInOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*b(2,10*(a-1)):.5*(-b(2,-10*--a)+2)},easeOutExpo:function(a){return 1===a?1:-b(2,-10*a)+1},swing:function(a){return.5-Math.cos(a*c)/2},swingFrom:function(a){return a*a*((d+1)*a-d)},swingTo:function(a){return(a-=1)*a*((d+1)*a+d)+1},backIn:function(a){return 1===a&&(a-=.001),a*a*((d+1)*a-d)},backOut:function(a){return(a-=1)*a*((d+1)*a+d)+1},bounce:function(a){var c,b=7.5625;return c=1/2.75>a?b*a*a:2/2.75>a?b*(a-=1.5/2.75)*a+.75:2.5/2.75>a?b*(a-=2.25/2.75)*a+.9375:b*(a-=2.625/2.75)*a+.984375},doubleSqrt:function(a){return Math.sqrt(Math.sqrt(a))}};a.provide({Easing:e})}(window.EC),function(a){"use strict";var b=function(b,c){this.tweenObj=b,this._updateCb=[],this._completeCb=[],this.cfg=c||{},this._repeatIndex=0,this._repeatCount=0,this.cfg.reverse&&(this._repeatCount=2),this.cfg.loop&&(this._repeatCount=a.isNumber(this.cfg.loop)?this.cfg.loop:-1)};b.cache={},b.timerCache={},b.uuid=0,b.expando="@Tween-"+ +new Date,b.get=function(a,c){return new b(a,c)},b.removeTweens=function(a){return a&&a[b.expando]&&b.timerCache[a[b.expando]]&&b.get(a).stop(),this},b.removeAllTweens=function(a){return a.getChilds().forEach(function(a){b.removeTweens(a)}),this},b.prototype={to:function(){var a=this,b=arguments;return this.queue(function(){a.anim.apply(a,b)}),this},wait:function(b){return a.isNumber(b)&&this.queue(b),this},anim:function(c,d,e){var i,j,f=this,g=+new Date,h=b.timerCache[f.tweenObj[b.expando]];return this.duration=d||600,this.easing=e,this.startAttrs=a.extend({},this.tweenObj),this.endAttrs=c,h?this:(j=function(){i=(+new Date-g)/f.duration,i=i>=1?1:i,f.percent=i,h=requestAnimationFrame(j),b.timerCache[f.tweenObj[b.expando]]=h,f.update(f.tweenObj),1==i&&(f.stop(),f.dequeue())},j(),this)},update:function(b){for(var c in this.endAttrs)this.endAttrs[c]!=this.startAttrs[c]&&(b[c]=this.startAttrs[c]+(this.endAttrs[c]-this.startAttrs[c])*(this.easing||a.Easing.linear)(this.percent));this._triggerUpdate(this.tweenObj)},stop:function(){return cancelAnimationFrame(b.timerCache[this.tweenObj[b.expando]]),delete b.timerCache[this.tweenObj[b.expando]],this},onUpdate:function(b,c){var d=this;return this._updateCb.push(function(){a.isFunction(b)&&b.apply(c||d,arguments)}),this},call:function(b,c){var d=this;return this._completeCb.push(function(){a.isFunction(b)&&b.apply(c||d,arguments)}),this},_triggerUpdate:function(a){this._updateCb.forEach(function(b){b(a)})},_triggerComplete:function(a){this._completeCb.forEach(function(b){b(a)})},queue:function(a){this.tweenObj[b.expando]||(this.tweenObj[b.expando]=++b.uuid);var c=b.cache[b.uuid];return void 0==c&&(c=b.cache[b.uuid]=[]),a&&c.push(a),"running"!==c[0]&&this.dequeue(),this},dequeue:function(){var e,c=this,d=b.cache[this.tweenObj[b.expando]]||[],f=d.shift();return"running"===f&&(f=d.shift()),f&&(d.unshift("running"),a.isNumber(f)?e=window.setTimeout(function(){window.clearTimeout(e),e=null,c.dequeue()},f):a.isFunction(f)&&f.call(c.tweenObj,function(){c.dequeue()})),d.length||(-1==this._repeatCount||++this._repeatIndex<this._repeatCount?this.to(this.startAttrs,this.duration,this.easing):delete b.cache[this.tweenObj[b.expando]],this._triggerComplete(this.tweenObj)),this},clearQueue:function(){return delete b.cache[this.tweenObj[b.expando]],this}},a.provide({Tween:b})}(window.EC),+function(a){"use strict";var o,p,b=Array.prototype.slice,c="onorientationchange"in window?"orientationchange":"resize",d=function(a,b){var e,f,g,h,c=b.anchorX+b.parent.anchorX,d=b.anchorY+b.parent.anchorY;"sx"in b?(e=a.canvas.width,f=a.canvas.height,g=b.swidth,h=b.sheight,g>=e&&(g=e-1),h>=f&&(h=f-1),a.drawImage(b.bitMapData,b.sx,b.sy,g,h,-1*c*b.width,-1*d*b.height,b.width,b.height)):a.drawImage(b.bitMapData,-1*c*b.width,-1*d*b.height,b.width,b.height)},e=function(a,b){a.font=b.size+"px "+b.textFamily,a.textAlign=b.textAlign,a.textBaseline=b.textBaseline||"hanging";var c=b.anchorX+b.parent.anchorX,d=b.anchorY+b.parent.anchorY;b.stroke?(a.strokeStyle=b.textColor,a.strokeText(b.text,-1*c*b.width,-1*d*b.height)):(a.fillStyle=b.textColor,a.fillText(b.text,-1*c*b.width,-1*d*b.height))},f=function(a,b){a.font=b.size+"px "+b.textFamily,b.width=a.measureText(b.text).width,b.height=b.size+2},g=function(a,b){a.beginPath(),i(a,b),b.draw(a),a.closePath()},h=function(a,b){b=b||{},a.globalAlpha=b.parent.alpha<1?b.parent.alpha:b.alpha,a.transform(b.scaleX*b.parent.scaleX,b.skewX*b.parent.skewX,b.skewY*b.parent.skewY,b.scaleY*b.parent.scaleY,b.parent.x+b.x+(b.anchorX+b.parent.anchorX)*b.width,b.parent.y+b.y+(b.anchorY+b.parent.anchorY)*b.height),a.rotate((b.rotation+b.parent.rotation)*Math.PI/180)},i=function(a,b){a.fillStyle=b.fillStyle,a.strokeStyle=b.strokeStyle,a.shadowColor=b.shadowColor,a.shadowBlur=b.shadowBlur||0,a.shadowOffsetX=b.shadowOffsetX||0,a.shadowOffsetY=b.shadowOffsetY||0,a.lineCap=b.lineCap,a.lineJoin=b.lineJoin,a.lineWidth=b.lineWidth||0,a.miterLimit=b.miterLimit},j=["rect","arc","moveTo","lineTo","clip","quadraticCurveTo","bezierCurveTo","arcTo"],k=a.Event.extend({initialize:function(){k.superclass.initialize.call(this),this.x=0,this.y=0,this.visible=!0,this.alpha=1,this.scaleX=1,this.scaleY=1,this.rotation=0,this.skewX=0,this.skewY=0,this.anchorX=0,this.anchorY=0,this.$type="ObjectContainer",this._children=[],this.numChildren=0},addChild:function(b,c){if(!a.isObject(b))throw new Error(String(b)+"is not a instance of EC");return b.parent=this,b.visible=a.isDefined(b.visible)?b.visible:this.visible,b.alpha=a.isDefined(b.alpha)?b.alpha:this.alpha,b.rotation=a.isDefined(b.rotation)?b.rotation:this.rotation,b.scaleX=a.isDefined(b.scaleX)?b.scaleX:this.scaleX,b.scaleY=a.isDefined(b.scaleY)?b.scaleY:this.scaleY,a.isNumber(c)?this._children.splice(c,0,b):this._children.push(b),"TextField"==b.$type&&f(b.MainContext,b),this.numChildren=this._children.length,this},addChildAt:function(a,b){return this.addChild(a,b)},removeChild:function(a){this._stopTweens(a);for(var b=0;b<this._children.length;b++)if(this._children[b]===a){this._children.splice(b,1);break}return this.numChildren=this._children.length,this},removeAllChildren:function(){return this._stopAllTweens(),this._children=[],this.numChildren=0,this},getChilds:function(){return this._children},getChildIndex:function(a){for(var b=0;b<this._children.length;b++)if(this._children[b]==a)return b;return-1},setChildIndex:function(a,b){return this.removeChild(a),this._children.splice(b,0,a),this},transform:function(a,b,c,d,e,f){return this.x=e,this.y=f,this.scaleX=a,this.scaleY=d,this.skewX=b,this.skewY=c,this},setTransform:function(a,b,c,d,e,f){return this.x=e,this.y=f,this.rotation=a,this.scaleY=d,this.skewX=b,this.skewY=c,this},_stopTweens:function(b){return a.Tween.removeTweens(b),this},_stopAllTweens:function(){return a.Tween.removeAllTweens(this),this}}),l=k.extend({initialize:function(a,b,c,d,e,f,g,h,i){l.superclass.initialize.call(this),this.text=a||"",this.size=b||16,this.textAlign=f||"start",this.textBaseline="",this.textFamily=g||"Microsoft yahei,Arial,sans-serif",this.textColor=e||"#000",this.stroke=!1,this.x=c||0,this.y=d||0,this.width=h||0,this.height=i||0,this.$type="TextField"}}),m=k.extend({initialize:function(b,c,d,e,f,g,h,i,j){m.superclass.initialize.call(this),this.x=c||0,this.y=d||0,a.isDefined(g)&&(this.sx=g),a.isDefined(h)&&(this.sy=h),a.isDefined(i)&&(this.swidth=i||.1),a.isDefined(j)&&(this.sheight=j||.1),this.$type="BitMap",a.isDefined(b)&&a.extend(this,a.isObject(b)?b:RES.getRes(b)),a.isDefined(e)&&(this.width=e),a.isDefined(f)&&(this.height=f)},setBitMap:function(b){if(!a.isObject(b))throw new Error(String(b)+"is a invalid bitMapObject");"nodeType"in b?this.bitMapData=b:a.extend(this,b)}}),n=k.extend({initialize:function(a,b,c,d){n.superclass.initialize.call(this),this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this._drawFuns=[],this._drawTypes=[],this.$type="Shape"},_setStyle:function(b,c,d,e,f,g,h){this._drawTypes.push(b.replace("Style","")),this[b]="number"==typeof d&&1>d?a.util.color.toRgb(c,d):c,this.shadowColor=e||0,this.shadowBlur=f||0,this.shadowOffsetX=g||0,this.shadowOffsetY=h||0},fill:function(){var a=b.call(arguments);a.unshift("fillStyle"),this._setStyle.apply(this,a)},stroke:function(){var d=b.call(arguments);d.unshift("strokeStyle"),this._setStyle.apply(this,d)},draw:function(b){this._drawFuns.forEach(function(c){a.isFunction(c)&&c(b)}),this._drawTypes.forEach(function(a){b[a]()})}});j.forEach(function(a){n.prototype[a]=function(){var c=this,d=b.call(arguments);("rect"==a||"arc"==a)&&(c.x=c.x+d.shift(),c.y=c.y+d.shift(),"arc"==a?(c.width=2*d[0],c.height=2*d[0]):(c.width=d[0],c.height=d[1]),d=[-1*c.anchorX*c.width,-1*c.anchorY*c.height].concat(d)),this._drawFuns.push(function(b){b[a].apply(b,d)})}}),o=k.extend({initialize:function(a,b,c,d){o.superclass.initialize.call(this),this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.$type="Sprite"},addChild:function(a){a.MainContext=this.MainContext,o.superclass.addChild.apply(this,arguments),1==this.getChilds().length?this.width=a.x+a.width:a.x+a.width>this.width&&(this.width=a.x+a.width)}}),p=k.extend({initialize:function(b,c){p.superclass.initialize.call(this),this.canvas=b,this.ctx=this.canvas.getContext("2d"),this.$type="Stage",this.options=a.extend({},{adapter:!0,showFps:!1,width:window.innerWidth,height:window.innerHeight},c||{}),this.width=parseFloat(this.canvas.getAttribute("width"))||this.options.width,this.height=parseFloat(this.canvas.getAttribute("height"))||this.options.height,this.lastTime=0,this._ticker=new a.Ticker,this.canvas.width=this.width,this.canvas.height=this.height,this.options.adapter&&this.setAdapter(),this.options.showFps&&(this.createFps(),this.on("enterframe",this.showFps,this)),this._initEvents(),this.start()},addChild:function(b){if(!a.isObject(b))throw new Error(String(b)+"is not a instance of EC");b.MainContext=this.ctx,p.superclass.addChild.apply(this,arguments),this._triggerAddToStage(b)},render:function(){var a=this,b=function(c){"Sprite"==c.$type?c.getChilds().forEach(function(a){b(a)}):a._renderItem(c)};return this._children.forEach(b),this},_renderItem:function(a){var b=this;if(a.visible!==!1){switch(b.ctx.save(),h(b.ctx,a),a.$type){case"BitMap":d(b.ctx,a);break;case"TextField":e(b.ctx,a);break;case"Shape":g(b.ctx,a)}b.ctx.restore()}},clear:function(){return this.ctx.clearRect(0,0,this.width,this.height),this},clearChildren:function(){this.removeAllChildren()},start:function(){return a.isDefined(self.renderTimer)?this:(this._ticker.start(),this)},stop:function(){return this._ticker.stop(),this.dispatch("stop"),this},_triggerAddToStage:function(a){var b=function(a){a.dispatch("addToStage"),"Sprite"==a.$type&&a.getChilds().forEach(b)};a.dispatch("addToStage",a),a.getChilds().forEach(b)},_triggerEnterFrame:function(){var a=function(b){b.dispatch("enterframe"),"Sprite"==b.$type&&b.getChilds().forEach(a)};this.getChilds().forEach(a)},setAdapter:function(){var b=this.canvas.parentNode,c=b.offsetWidth-parseFloat(a.getStyle(b,"padding-left"))-parseFloat(a.getStyle(b,"padding-right"));return this.canvas.style.width=c+"px",this.canvas.style.height=this.height/this.width*c+"px",this},_initEvents:function(){this._ticker.on("ticker",function(){this.clear(),this.render(),this.dispatch("enterframe")},this),this.on("enterframe",this._triggerEnterFrame,this),this.options.adapter&&window.addEventListener(c,function(){this.setAdapter()}.bind(this),!1),(new a.TouchEvent).attach(this)},createFps:function(){this.fpsLoger=document.createElement("div"),this.fpsLoger.className="fps-loger",this.fpsLoger.style.cssText="position:fixed;left:0;top:0;right:0;padding:8px 15px;background-color:#f5f5f5;border-bottom:1px solid #ccc;z-index:2000;",document.body.appendChild(this.fpsLoger)},calculateFps:function(a){var b=1e3/(a-this.lastTime);return this.lastTime=a,b},showFps:function(){this.fpsLoger.innerHTML="FPS: "+this.calculateFps(Date.now()).toFixed(2)}}),j.concat(["createLinearGradient","createPattern","createRadialGradient","createImageData","putImageData","getImageData","isPointInPath","globalCompositeOperation"]).forEach(function(a){p.prototype[a]=function(){return this.ctx[a].apply(this.ctx,arguments)}}),a.provide({TextField:l,BitMap:m,Shape:n,Sprite:o,Stage:p})}(window.EC),function(a,b){"use strict";var c=a.Sprite.extend({initialize:function(b,d,e){c.superclass.initialize.call(this),this._startFrame=0,this._startTime=0,this._playTimes=-1,this._resKey=e,this.currentFrame=0,this.isPlaying=!1,this.setRES(b,d),this._clip=new a.BitMap(this.RESUrl),this.addChild(this._clip),Array.isArray(this.RESUrl)?(this.totalFrames=this.RESUrl.length,this.setFrame=this.setFrameByPath):this.setFrame=this.setFrameBySprite,this._timer=new a.Timer(this.frameRate,this._repeatCount),this._initEvents()},setRES:function(b,c,f){this.RESUrl=d(b),this.RES=e(c,this._resKey),this.currentFrame=0,this.frame=this.getMovieClipData(this._resKey),this.frameRate=Math.round(1e3/(this.frame.frameRate||24)),this.totalFrames=this.frame.frames.length,Array.isArray(this.RESUrl)?this.bitMapData=this.RESUrl[this.currentFrame].bitMapData:(a.isObject(this.RESUrl)&&"nodeType"in this.RESUrl&&(this.RESUrl={bitMapData:this.RESUrl,width:this.RESUrl.width,height:this.RESUrl.height}),this.bitMapData=this.RESUrl.bitMapData),f&&this.setFrameRate(f)},getMovieClipData:function(a){return this.RES.mc[a]||[]},gotoAndPlay:function(a,b,c){return a=Math.max(0,a-1),this._startFrame=a,this._playTimes=b,this.currentFrame=a,this._playTimes>0&&(this._repeatCount=this._playTimes*this.totalFrames,this._timer.setRepeatCount(this._repeatCount)),c&&this.setFrameRate(Math.round(1e3/c)),this.setFrame(this.currentFrame),this.play(),this},gotoAndStop:function(a){return this.setFrame(a)},prevFrame:function(){return this.setFrame(--this.currentFrame)},nextFrame:function(){return this.setFrame(++this.currentFrame)},play:function(){return this.isPlaying?this:(this._startTime=Date.now(),this._timer.start(),this.isPlaying=!0,this)},stop:function(){return this._timer.stop(),this.isPlaying=!1,this},pause:function(a){return this._timer.pause(a),this._startTime+=a,this.isPlaying=!1,this},wait:function(a){return this._timer.wait(a),this},setFrameRate:function(a){this.frameRate=a},setFrameBySprite:function(a){var c=this.frame.frames[a]||{},d=this.RES.res[c.res];if(d!=b)return this._timer.delay=(c.duration||0)*this.frameRate,this._clip.x=c.x||0,this._clip.y=c.y||0,this._clip.sx=d.x||0,this._clip.sy=d.y||0,this._clip.swidth=d.w||this.width||0,this._clip.sheight=d.h||this.height||0,this._clip.width=this._clip.swidth,this._clip.height=this._clip.sheight,this.width=this._clip.width,this.height=this._clip.height,this},setFrameByPath:function(a){var b=this.frame.frames[a]||{},c=this.RESUrl[a];return this._timer.delay=(b.duration||0)*this.frameRate,this._clip.bitMapData=c.bitMapData,this._clip.x=b.x||0,this._clip.y=b.y||0,this._clip.width=c.width||this.width||0,this._clip.height=c.height||this.height||0,this},_initEvents:function(){this._timer.on("timer",function(){++this.currentFrame>this.totalFrames-1&&(this.currentFrame=this._startFrame,this.dispatch("loopcomplete")),this.setFrame(this.currentFrame)},this),this._timer.on("complete",function(){this.off("enterframe"),this.dispatch("complete")},this)}}),d=function(a){return/_(png|jpg|jpeg|gif|bmp|)$/.test(a)?RES.getRes(a):a},e=function(a,b){var c,d,e;return"string"==typeof a?RES.getRes(a):Array.isArray(a)?(c=[],d={},e={mc:{},res:{}},a.forEach(function(a){var b=a.split(" "),e=f();c.push({res:e,x:0,y:0,duration:1}),d[e]={x:-1*b[0],y:-1*b[1]}}),e.mc[b]={frames:c,frameRate:24},e.res=d,e):a},f=function(a){var b="",c=0;for(a=a||8;c++<a;)b+=Math.floor(16*Math.random()).toString(16);return b.toUpperCase()};a.provide({MovieClip:c})}(window.EC);