this.WXApi=function(){var getParameter=function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?c[2]:null},_extend=function(a,b){b=b||{};for(var c in b)a.hasOwnProperty(c)&&(a[c]=b[c]);return a},setOption=function(a,b,c){var d={title:"",desc:"",link:"",imgUrl:"",type:"",dataUrl:"",success:function(){},cancel:function(){}};return _extend(d,a),b&&(d.success=b),c&&(d.cancel=c),d},shareToTimeline=function(){option=setOption.apply(null,arguments),option.title=option.desc,wx.onMenuShareTimeline(option)},sendToFriend=function(){option=setOption.apply(null,arguments),wx.onMenuShareAppMessage(option)},shareToQQ=function(){option=setOption.apply(null,arguments),wx.onMenuShareQQ(option)},shareToWeibo=function(){option=setOption.apply(null,arguments),wx.onMenuShareWeibo(option)},getNetWork=function(a){wx.getNetworkType({success:function(b){var c=b.networkType;a&&a(c)}})},scanQRCode=function(a){wx.closeWindow(),wx.scanQRCode({desc:"scanQRCode desc",needResult:0,scanType:["qrCode","barCode"],success:function(b){var c=b.resultStr;a&&a(c)}})},getLocation=function(a){wx.getLocation({success:function(b){a&&a(b)}})},openLocation=function(a){wx.openLocation(_extend({latitude:0,longitude:0,name:"",address:"",scale:1,infoUrl:""},a))},jsApiList=["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onRecordEnd","playVoice","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"],checkJsApi=function(a,b){wx.checkJsApi({jsApiList:a,success:function(a){b&&b(a)}})},isWeixin=function(){return void 0==this.__isWeiXin?this.__isWeiXin=/MicroMessenger/i.test(navigator.userAgent):this.__isWeiXin},config=function(a){void 0==a.jsApiList&&(a.jsApiList=jsApiList),wx.config(a)},setConfig=function(proxy){proxy=proxy||"/sypro/service/getWeiXinCode/getwxjsConfig?url=",proxy+=encodeURIComponent(location.href.split("#")[0]);var xhr=new XMLHttpRequest;xhr.onload=function(){if(xhr.onload=new Function,xhr.status>=200&&xhr.status<300||304==xhr.status){var res=eval(xhr.responseText);res=eval("("+res+")"),config(res)}else console.log("WeiXin config get fail:"+xhr.status)},xhr.open("GET",proxy,!0),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.withCredentials=!0,xhr.send(null)};return isWeixin()&&setConfig(),{ready:function(a){isWeixin()?wx.ready(a):document.addEventListener("DOMContentLoaded",a,!1)},error:wx.error,checkJsApi:checkJsApi,shareToTimeline:shareToTimeline,sendToFriend:sendToFriend,shareToQQ:shareToQQ,shareToWeibo:shareToWeibo,getNetWork:getNetWork,scanQRCode:scanQRCode,getLocation:getLocation,openLocation:openLocation,hideOptionMenu:wx.hideOptionMenu,showOptionMenu:wx.showOptionMenu,closeWindow:wx.closeWindow,hideMenuItems:wx.hideMenuItems,showMenuItems:wx.showMenuItems,hideAllNonBaseMenuItem:wx.hideAllNonBaseMenuItem,showAllNonBaseMenuItem:wx.showAllNonBaseMenuItem,jsApiList:jsApiList,config:config,setConfig:setConfig,isWeixin:isWeixin,getParameter:getParameter}}(),WXApi.setDesc=function(a){"object"==typeof window.shareData&&(window.shareData.desc=a)},WXApi.setTitle=function(a){"object"==typeof window.shareData&&(window.shareData.title=a)},WXApi.deploy=function(a){WXApi.shareToTimeline(window.shareData,function(){a(2)}),WXApi.sendToFriend(window.shareData,function(){a(1)}),WXApi.shareToQQ(window.shareData,function(){a(3)}),WXApi.shareToWeibo(window.shareData,function(){a(4)})},WXApi.ready(function(){WXApi.deploy()});try{WXApi.error(function(a){alert("微信认证失败:"+JSON.stringify(a))})}catch(e){}