var Bird=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){var e=this.mcData=RES.getRes("bird_json"),i=this.mcTexture=RES.getRes("bird_png"),n=new egret.MovieClipDataFactory(e,i);this.bird=new egret.MovieClip(n.generateMovieClipData("bird")),this.addChild(this.bird),this.initEvents()},n.setFrame=function(t){this.bird.gotoAndStop(t)},n.play=function(){this.bird.frameRate=20,this.bird.gotoAndPlay(1,1)},n.infinitePlay=function(){this.removeChild(this.bird),this.mcData.mc.bird.frames=this.mcData.mc.bird.frames.slice(35);var t=new egret.MovieClipDataFactory(this.mcData,this.mcTexture);this.bird=new egret.MovieClip(t.generateMovieClipData("bird")),this.addChild(this.bird),this.bird.gotoAndPlay(1,-1)},n.initEvents=function(){this.bird.once(egret.Event.COMPLETE,function(t){this.infinitePlay()},this)},e}(egret.Sprite);egret.registerClass(Bird,"Bird");var BirdC=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){var e=RES.getRes("bird_c_json"),i=RES.getRes("bird_c_png"),n=new egret.MovieClipDataFactory(e,i);this.bird_c=new egret.MovieClip(n.generateMovieClipData("bird_c")),this.addChild(this.bird_c)},n.setFrame=function(t){this.bird_c.gotoAndStop(t)},n.play=function(){this.bird_c.frameRate=20,this.bird_c.gotoAndPlay(1,-1)},e}(egret.Sprite);egret.registerClass(BirdC,"BirdC");var Book=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){var e=RES.getRes("book_json"),i=RES.getRes("book_png"),n=new egret.MovieClipDataFactory(e,i);this.book=new egret.MovieClip(n.generateMovieClipData("book")),this.addChild(this.book)},n.setFrame=function(t){var e=this.book.totalFrames;t>e||this.book.gotoAndStop(t)},e}(egret.Sprite);egret.registerClass(Book,"Book");var Fish=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){var e=RES.getRes("fish_json"),i=RES.getRes("fish_png"),n=new egret.MovieClipDataFactory(e,i);this.fish=new egret.MovieClip(n.generateMovieClipData("fish")),this.addChild(this.fish)},n.setFrame=function(t){this.fish.gotoAndStop(t)},n.play=function(){this.fish.frameRate=20,this.fish.gotoAndPlay(1,-1)},e}(egret.Sprite);egret.registerClass(Fish,"Fish");var House=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){var e=RES.getRes("house_json"),i=RES.getRes("house_png"),n=new egret.MovieClipDataFactory(e,i);this.house=new egret.MovieClip(n.generateMovieClipData("house")),this.addChild(this.house)},n.setFrame=function(t){this.house.gotoAndStop(t)},n.play=function(){this.house.frameRate=20,this.house.gotoAndPlay(1,-1)},e}(egret.Sprite);egret.registerClass(House,"House");var LoadingUI=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createView=function(){var t=Utils.createMask(16777215,1);t.width=Main.instance.stageW,t.height=Main.instance.stageH,this.addChild(t);var e=RES.getRes("loading_json"),i=RES.getRes("loading_png"),n=new egret.MovieClipDataFactory(e,i),s=new egret.MovieClip(n.generateMovieClipData("loading"));s.x=753,s.y=158,s.gotoAndPlay(1,-1),this.addChild(s),this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=s.y+s.height+100,this.textField.x=Main.instance.stageW/2,this.textField.anchorOffsetX=240,this.textField.width=480,this.textField.height=100,this.textField.textColor=4473924,this.textField.textAlign="center"},n.setProgress=function(t,e){this.textField.text="loading: "+Math.floor(t/e*100)+"%"},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.call(this),this.scrollRatio=1,e.instance=this,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight;var e=window._SOURCE_BASE_||"";RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(e+"resource/default.res.json",e+"resource/")},n.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loading")},n.onResourceLoadComplete=function(t){"loading"==t.groupName&&(this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.loadGroup("preload")),"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},n.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},n.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},n.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},n.createGameScene=function(){this.sceneContainer=new egret.Sprite,this.addChild(this.sceneContainer),this.createBigMan(),this.createAllScenes(),this.snowScene=new SnowScene(this.scene1.book.x,this.scene1.book.y+this.scene1.book.height/2),this.addChild(this.snowScene),this.setScrollView(),this.initEvents()},n.setScrollView=function(){var t=Utils.createBitmapByName("page_bg_png"),e=t.texture.bitmapData.attributes.src.value,i=document.querySelector(".evt-scroll-view");i.style.height=this.stageH*this.sceneContainer.numChildren-(800-window.innerHeight)/2+"px",i.style.background="url("+e+")"},n.createAllScenes=function(){for(var t=0;4>t;t++){var e=egret.getDefinitionByName("Scene"+(t+1));this["scene"+(t+1)]=new e,this["scene"+(t+1)].y=-this.stageH*t,this.sceneContainer.addChild(this["scene"+(t+1)])}},n.setRatio=function(){this.scrollRatio=this.stageH/window.innerHeight},n.getStageTop=function(){return(Math.ceil(window.innerWidth/this.stageW*this.stageH)-window.innerHeight)/2},n.initEvents=function(){var t,e=this,i=this.scene1.book.height/25,n=this.sceneContainer.y;window.addEventListener("scroll",t=function(t){var s=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;s*=e.scrollRatio,e.setSceneAnimate(n+s),e.snowScene.setAnimates(s),e.scene1.book.setFrame(Math.ceil(s/i)),e.scene1.setScrollAnim(s),s>e.stageH&&(e.scene2.dispatchEvent(new egret.Event("SCENE_ENTER_2")),e.scene2.setScroll(s)),s>2*e.stageH&&(e.scene3.dispatchEvent(new egret.Event("SCENE_ENTER_3")),e.scene3.setScroll(s)),s>2.7*e.stageH&&(e.scene4.dispatchEvent(new egret.Event("SCENE_ENTER_4")),e.scene4.setScroll(s)),s>.5*e.stageH&&s<2.4*e.stageH?e.showBigMan():e.hideBigMan()},!1),t(),window.addEventListener("resize",function(i){e.setScrollView(),t()},!1)},n.setSceneAnimate=function(t){egret.Tween.removeTweens(this.sceneContainer),egret.Tween.get(this.sceneContainer).to({y:t},800,egret.Ease.circOut)},n.createBigMan=function(){this.bigMan=Utils.createBitmapByName("big_man_png"),this.bigMan.anchorOffsetX=this.bigMan.width/2,this.bigMan.x=this.stageW/2-50,this.bigMan.y=this.stageH,this.addChild(this.bigMan),this.bigMan.touchEnabled=!0,this.bigMan.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){window.href_fun&&window.href_fun()},this)},n.showBigMan=function(){egret.Tween.removeTweens(this.bigMan),egret.Tween.get(this.bigMan).to({y:this.stageH-this.bigMan.height-this.getStageTop()},1e3,egret.Ease.circOut)},n.hideBigMan=function(){egret.Tween.removeTweens(this.bigMan),egret.Tween.get(this.bigMan).to({y:this.stageH},1e3,egret.Ease.circOut)},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var Man=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){var e=this.mcData=RES.getRes("man_json"),i=this.mcTexture=RES.getRes("man_png"),n=new egret.MovieClipDataFactory(e,i);this.man=new egret.MovieClip(n.generateMovieClipData("man")),this.addChild(this.man),this.initEvents()},n.setFrame=function(t){this.man.gotoAndStop(t)},n.play=function(){this.man.frameRate=20,this.man.gotoAndPlay(1,1)},n.infinitePlay=function(){this.removeChild(this.man),this.mcData.mc.man.frames=this.mcData.mc.man.frames.slice(25);var t=new egret.MovieClipDataFactory(this.mcData,this.mcTexture);this.man=new egret.MovieClip(t.generateMovieClipData("man")),this.addChild(this.man),this.man.gotoAndPlay(1,-1)},n.initEvents=function(){this.man.once(egret.Event.COMPLETE,function(t){this.infinitePlay()},this)},e}(egret.Sprite);egret.registerClass(Man,"Man");var Mouse=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){var e=this.mcData=RES.getRes("mouse_json"),i=this.mcTexture=RES.getRes("mouse_png"),n=new egret.MovieClipDataFactory(e,i);this.mouse=new egret.MovieClip(n.generateMovieClipData("mouse")),this.addChild(this.mouse),this.initEvents()},n.setFrame=function(t){this.mouse.gotoAndStop(t)},n.play=function(){this.mouse.frameRate=20,this.mouse.gotoAndPlay(1,1)},n.infinitePlay=function(){this.removeChild(this.mouse),this.mcData.mc.mouse.frames=this.mcData.mc.mouse.frames.slice(28);var t=new egret.MovieClipDataFactory(this.mcData,this.mcTexture);this.mouse=new egret.MovieClip(t.generateMovieClipData("mouse")),this.addChild(this.mouse),this.mouse.gotoAndPlay(1,-1)},n.initEvents=function(){this.mouse.once(egret.Event.COMPLETE,function(t){this.infinitePlay()},this)},e}(egret.Sprite);egret.registerClass(Mouse,"Mouse");var MouseC=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){var e=RES.getRes("mouse_c_json"),i=RES.getRes("mouse_c_png"),n=new egret.MovieClipDataFactory(e,i);this.mouse_c=new egret.MovieClip(n.generateMovieClipData("mouse_c")),this.addChild(this.mouse_c)},n.setFrame=function(t){this.mouse_c.gotoAndStop(t)},n.play=function(){this.mouse_c.frameRate=20,this.mouse_c.gotoAndPlay(1,-1)},e}(egret.Sprite);egret.registerClass(MouseC,"MouseC");var Scene1=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){this.book=new Book,this.book.width=681,this.book.anchorOffsetX=this.book.width/2,this.book.x=Main.instance.stageW/2,this.book.y=60,this.book._y=60,this.addChild(this.book),this.title=Utils.createBitmapByName("title_png"),this.title.anchorOffsetX=this.title.width/2,this.title.x=Main.instance.stageW/2,this.title.y=488+this.title.height/2,this.title._y=488,this.title.alpha=0,this.addChild(this.title),this.titleText=Utils.createBitmapByName("text_png"),this.titleText.x=Main.instance.stageW/2-this.titleText.width/4,this.titleText.anchorOffsetX=this.titleText.width/2,this.titleText.y=648+this.titleText.height/2,this.titleText._y=648,this.titleText.alpha=0,this.addChild(this.titleText),this.arrowSprite=new egret.Sprite,this.addChild(this.arrowSprite),this.arrow=Utils.createBitmapByName("arrow_png"),this.arrowSprite.addChild(this.arrow),this.arrowText=Utils.createBitmapByName("arrow_text_png"),this.arrowText.y=57,this.arrowText.anchorOffsetX=this.arrowText.width/2,this.arrowText.x=20,this.arrowSprite.addChild(this.arrowText),this.arrowSprite.x=Main.instance.stageW/2,this.arrowSprite.anchorOffsetX=this.arrowSprite.width/2,this.arrowSprite.y=778,this.arrowSprite._y=778,this.setAnimaion()},n.setAnimaion=function(){egret.Tween.get(this.title).wait(300).to({alpha:1,y:488},800,egret.Ease.backInOut),egret.Tween.get(this.titleText).wait(800).to({alpha:1,y:648},800,egret.Ease.backInOut);var t=this.arrow.y,e=function(){egret.Tween.get(this.arrow).to({y:t+30},600,egret.Ease.circIn).to({y:t},600,egret.Ease.circOut).wait(200).call(e,this)};e.call(this)},n.setScrollAnim=function(t){var e=t/(Main.instance.stageH/2),i=Math.max(0,1-e),n=1+.5*e,s=.6*t;this.book.scaleX=this.book.scaleY=n,this.book.y=this.book._y+s,this.title.alpha=i,this.title.y=this.title._y+s,this.titleText.alpha=i,this.titleText.y=this.titleText._y+s,this.arrowSprite.alpha=i,this.arrowSprite.y=this.arrowSprite._y+s},e}(egret.Sprite);egret.registerClass(Scene1,"Scene1");var Scene2=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){this.stext=Utils.createBitmapByName("s2_text_png"),this.stext.x=Main.instance.stageW/2,this.stext.anchorOffsetX=this.stext.width/2,this.stext.y=Main.instance.stageH/2,this.stext.anchorOffsetY=this.stext.height/2,this.addChild(this.stext),this.sceneContainer=new egret.Sprite,this.sceneContainer.y=-Main.instance.stageH/2,this.bird=new Bird,this.bird.x=736,this.bird.y=-135,this.sceneContainer.addChild(this.bird);var e=Utils.createBitmapByName("bg2_png");this.sceneContainer.addChild(e),this.house=new House,this.house.x=662,this.house.y=126,this.sceneContainer.addChild(this.house),this.mouse=new Mouse,this.mouse.x=767,this.mouse.y=188,this.sceneContainer.addChild(this.mouse),this.man=new Man,this.man.x=305,this.man.y=160,this.sceneContainer.addChild(this.man),this.addChild(this.sceneContainer),this.initEvents()},n.setAnimation=function(){this.house.play(),this.mouse.play(),this.bird.play(),this.man.play()},n.setScroll=function(t){egret.Tween.removeTweens(this.sceneContainer),egret.Tween.get(this.sceneContainer).to({y:-Main.instance.stageH/2+(t-Main.instance.stageH)},600,egret.Ease.circOut)},n.initEvents=function(){this.once("SCENE_ENTER_2",function(t){this.setAnimation()},this)},e}(egret.Sprite);egret.registerClass(Scene2,"Scene2");var Scene3=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){this.stext=Utils.createBitmapByName("s3_text_png"),this.stext.x=Main.instance.stageW/2,this.stext.anchorOffsetX=this.stext.width/2,this.stext.y=Main.instance.stageH/2,this.stext.anchorOffsetY=this.stext.height/2,this.addChild(this.stext),this.sceneContainer=new egret.Sprite,this.sceneContainer.y=-Main.instance.stageH/1.6;var e=Utils.createBitmapByName("bg3_png");this.sceneContainer.addChild(e),this.fish=new Fish,this.fish.x=542,this.fish.y=310,this.sceneContainer.addChild(this.fish),this.skating=new Skating,this.skating.x=597,this.skating.y=212,this.sceneContainer.addChild(this.skating),this.bird_c=new BirdC,this.bird_c.x=1060,this.bird_c.y=120,this.sceneContainer.addChild(this.bird_c),this.tree=Utils.createBitmapByName("tree_png"),this.tree.x=1183,this.tree.y=200,this.sceneContainer.addChild(this.tree),this.mouse_c=new MouseC,this.mouse_c.x=1403,this.mouse_c.y=260,this.sceneContainer.addChild(this.mouse_c),this.addChild(this.sceneContainer),this.initEvents()},n.setAnimation=function(){this.skating.play(),this.bird_c.play(),this.fish.play(),this.mouse_c.play()},n.setScroll=function(t){egret.Tween.removeTweens(this.sceneContainer),egret.Tween.get(this.sceneContainer).to({y:-Main.instance.stageH/1.6+(t-2*Main.instance.stageH)},600,egret.Ease.circOut)},n.initEvents=function(){this.once("SCENE_ENTER_3",function(t){this.setAnimation()},this)},e}(egret.Sprite);egret.registerClass(Scene3,"Scene3");var Scene4=function(t){function e(){t.call(this),this.headerH=100,this.isSoldOut=void 0==window.is_disabled?!0:0==window.is_disabled,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){this.sceneContainer=new egret.Sprite,this.sceneContainer.y=-Main.instance.stageH,this.bg=Utils.createBitmapByName("bg4_png"),this.bg.y=-this.headerH,this.sceneContainer.addChild(this.bg),this.book=Utils.createBitmapByName("f_book_png"),this.book.x=618-this.book.width/2,this.book.y=-20-this.book.height/3-this.headerH,this.book.alpha=0,this.sceneContainer.addChild(this.book),this.text=Utils.createBitmapByName("f_text_png"),this.text.x=945+this.text.width/3,this.text.y=178-this.text.height/2-this.headerH,this.text.alpha=0,this.sceneContainer.addChild(this.text),this.head=Utils.createBitmapByName("man_head_png"),this.head.x=797+this.head.width/2,this.head.y=320+this.head.height/2-this.headerH,this.head.alpha=0,this.sceneContainer.addChild(this.head),this.head.touchEnabled=!0,this.head.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOpenClick,this),this.priceSprite=new egret.Sprite,this.price=Utils.createBitmapByName("price_png"),this.priceSprite.addChild(this.price),this.buyBtn=Utils.createBitmapByName("buy_btn_png"),this.buyBtn.x=5,this.buyBtn.y=this.price.height+15,this.priceSprite.addChild(this.buyBtn),this.buyBtn.visible=!this.isSoldOut,this.buyBtn.touchEnabled=!0,this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyClick,this),this.buyBtnDisabled=Utils.createBitmapByName("buy_btn_d_png"),this.buyBtnDisabled.x=5,this.buyBtnDisabled.y=this.price.height+15,this.priceSprite.addChild(this.buyBtnDisabled),this.buyBtnDisabled.visible=this.isSoldOut,this.buyBtnDisabled.touchEnabled=!0,this.buyBtnDisabled.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyDisClick,this),this.priceSprite.x=618-this.priceSprite.width/2,this.priceSprite.y=552+this.priceSprite.height/2-this.headerH,this.priceSprite.alpha=0,this.sceneContainer.addChild(this.priceSprite),this.addChild(this.sceneContainer),this.initEvents()},n.onOpenClick=function(t){window.href_fun&&window.href_fun()},n.onBuyClick=function(t){window.btn_now_buy&&window.btn_now_buy()},n.onBuyDisClick=function(t){window.btn_now_disabled&&window.btn_now_disabled()},n.setAnimation=function(){egret.Tween.get(this.book).to({alpha:1,x:618,y:35-this.headerH},1e3,egret.Ease.circOut),egret.Tween.get(this.text).wait(1e3).to({alpha:1,x:945,y:178-this.headerH},1e3,egret.Ease.circOut),egret.Tween.get(this.head).wait(2e3).to({alpha:1,x:797,y:320-this.headerH},1e3,egret.Ease.circOut),egret.Tween.get(this.priceSprite).wait(3e3).to({alpha:1,x:618,y:552-this.headerH},1e3,egret.Ease.circOut)},n.setScroll=function(t){egret.Tween.removeTweens(this.sceneContainer);var e=Math.min(0,-Main.instance.stageH+(t-2*Main.instance.stageH));egret.Tween.get(this.sceneContainer).to({y:e},1200,egret.Ease.circOut)},n.initEvents=function(){var t=this,e=document.body,i=document.querySelector("canvas"),n=Main.instance.bigMan;this.once("SCENE_ENTER_4",function(t){this.setAnimation()},this),i.addEventListener("mousemove",function(s){var a=s.clientX,o=s.clientY,r=window.pageYOffset/Main.instance.stageH>2.8,h=parseFloat(i.style.width)/Main.instance.stageW,d=parseFloat(i.style.height)/Main.instance.stageH,c=parseFloat(i.style.left)||0,g=parseFloat(i.style.top)||0,l=t.priceSprite.x,u=t.priceSprite.y,p=(l+t.buyBtn.x)*h+c,f=(u+t.buyBtn.y)*d+g+130,v=t.buyBtn.width*h,E=t.buyBtn.height*d,_=t.head.x*h+c,S=t.head.y*d+g+130,m=t.head.width*h,w=t.head.height*d,C=n.x*h+c-n.width/2,y=n.y*d+g,T=n.width*h,x=n.height*d;r&&(a>p&&v+p>a&&o>f&&E+f>o||a>_&&m+_>a&&o>S&&w+S>o)||a>C&&T+C>a&&o>y&&x+y>o?e.style.cursor="pointer":e.style.cursor=""},!1)},e}(egret.Sprite);egret.registerClass(Scene4,"Scene4");var Settings=function(){function t(){}var e=(__define,t);e.prototype;return t.score=0,t.bestScore=0,t.elementCounts=5,t.luckerIndex=6,t.runningCount=5,t.obstacleMap={1:-1,2:-1,3:1,4:0,5:0},t}();egret.registerClass(Settings,"Settings");var Skating=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){var e=this.mcData=RES.getRes("skating_json"),i=this.mcTexture=RES.getRes("skating_png"),n=new egret.MovieClipDataFactory(e,i);this.skating=new egret.MovieClip(n.generateMovieClipData("skating")),this.addChild(this.skating),this.initEvents()},n.setFrame=function(t){this.skating.gotoAndStop(t)},n.play=function(){this.skating.frameRate=20,this.skating.gotoAndPlay(1,1)},n.infinitePlay=function(){this.removeChild(this.skating),this.mcData.mc.skating.frames=this.mcData.mc.skating.frames.slice(20);var t=new egret.MovieClipDataFactory(this.mcData,this.mcTexture);this.skating=new egret.MovieClip(t.generateMovieClipData("skating")),this.addChild(this.skating),this.skating.gotoAndPlay(1,-1)},n.initEvents=function(){this.skating.once(egret.Event.COMPLETE,function(t){this.infinitePlay()},this)},e}(egret.Sprite);egret.registerClass(Skating,"Skating");var Snow=function(t){function e(e){t.call(this),this.type=e,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){this.snow=Utils.createBitmapByName("snow"+this.type),this.width=this.snow.width,this.height=this.snow.height,this.addChild(this.snow)},e}(egret.Sprite);egret.registerClass(Snow,"Snow");var SnowScene=function(t){function e(e,i){t.call(this),this.stageW=Main.instance.stageW,this.stageH=Main.instance.stageH,this.snowStack=new Array,this.snowX=e,this.snowY=i,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onAddToStage=function(t){this.scrollHolder=Main.instance.scene1.book.height/2;for(var e=1;13>e;e++)this.createSnow(e)},n.createSnow=function(t){var e=new Snow(t);e.scaleX=e.scaleY=.4,e.alpha=0,e.typeIndex=t,e.randOffsetX=this.rand(0,500),this.addChild(e),e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x=this.snowX-e.width/2,e.y=this.snowY-e.height/2,this.snowStack.push(e)},n.doAnimate=function(t,e){var i=e/this.stageH/4,n=t.typeIndex<7?!0:!1,s=t.typeIndex*this.stageW/15,a=Math.min(e/this.scrollHolder,1),o=e/this.stageH*60,r=.05;e>2*this.stageH&&(r=.12),e>2.5*this.stageH&&(r=.26),egret.Tween.removeTweens(t),egret.Tween.get(t).to({alpha:a,scaleX:a,scaleY:a,rotation:o,y:this.snowY-e*r+t.randOffsetX,x:this.snowX-250+(n?-1:1)*Math.sin(5*i)*s},600,egret.Ease.circOut)},n.setAnimates=function(t){for(var e=0;e<this.snowStack.length;e++)this.doAnimate(this.snowStack[e],t)},n.rand=function(t,e){return t+Math.random()*(e-t)},e}(egret.Sprite);egret.registerClass(SnowScene,"SnowScene");var Utils=function(){function t(){}var e=(__define,t);e.prototype;return t.hitTest=function(t,e){var i=t.getBounds(),n=e.getBounds();return i.x=t.x,i.y=t.y,n.x=e.x,n.y=e.y,!(i.x>n.x+(.3*e.width-1)||i.x+(.3*t.width-1)<n.x||i.y>n.y+(.3*e.height-1)||i.y+(.3*t.height-1)<n.y)},t.randomRange=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t.createTextField=function(t,e,i,n,s,a,o,r,h){void 0===a&&(a=!1),void 0===o&&(o="center"),void 0===r&&(r=!1),void 0===h&&(h=!1);var d=new egret.TextField;return d.x=e,d.y=i,d.textColor=n,d.textAlign=o,d.text=t,d.size=s,a&&(d.anchorOffsetX=d.width/2,d.anchorOffsetY=d.height/2),r&&(d.x=(egret.MainContext.instance.stage.stageWidth-d.width)/2),h&&(d.y=(egret.MainContext.instance.stage.stageHeight-d.height)/2),d},t.createMask=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=.8),void 0===i&&(i=egret.MainContext.instance.stage.stageWidth),void 0===n&&(n=egret.MainContext.instance.stage.stageHeight);var s=new egret.Shape;return s.graphics.beginFill(t,e),s.graphics.drawRect(0,0,i,n),s.graphics.endFill(),s.width=i,s.height=n,s},t.setStorage=function(t,e){try{localStorage.setItem(t,e)}catch(i){}},t.getStorage=function(t){try{return localStorage.getItem(t)}catch(e){return null}},t.getStageW=function(){var t=egret.MainContext.instance.stage.stageWidth;return t},t.getStageH=function(){var t=egret.MainContext.instance.stage.stageHeight;return t},t}();egret.registerClass(Utils,"Utils");